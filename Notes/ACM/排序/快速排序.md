# 快速排序

```C++
template<typename type>
void q_sort(
    type *begin,
    type *end,
    bool (*cmp)(type a,type b) = [](type a,type b){
        return a < b;
    }
){
    type *lend = begin,*rend = end-1;
    type mid_num = *(lend + (rend-lend)/2);
    type *lpt = lend,*rpt = rend;

    while(lpt<=rpt){
        while(cmp(*lpt,mid_num))    lpt++;
        while(cmp(mid_num,*rpt))    rpt--;

        if(lpt>rpt) break;
        swap(*lpt,*rpt);
        lpt++;rpt--;
    }

    if(lpt<rend)    q_sort(lpt,rend+1);
    if(lend<rpt)    q_sort(lend,rpt+1);
}
```

$\\$

### 一行版本

```C++
template<typename type> void q_sort(type *begin,type *end,bool (*cmp)(type a,type b) = [](type a,type b){return a < b;})    {type *lend = begin,*rend = end-1;type mid_num = *(lend + (rend-lend)/2);type *lpt = lend,*rpt = rend;while(lpt<=rpt){while(cmp(*lpt,mid_num))lpt++;while(cmp(mid_num,*rpt))rpt--;if(lpt>rpt) break;swap(*lpt,*rpt);lpt++;rpt--;}if(lpt<rend)q_sort(lpt,rend+1);if(lend<rpt)q_sort(lend,rpt+1);}
```

